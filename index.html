<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ - ØªØ¹Ù„Ù… ÙˆØ­ÙØ¸ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Hafs:wght@400;700&display=swap');
        
        :root {
            --primary-color: #0d7377;
            --secondary-color: #14a085;
            --accent-color: #f39c12;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --highlight-color: #ff9ff3;
            --quiz-color: #8e44ad;
            --memorization-color: #9b59b6;
            --waiting-color: #f1c40f;
            --background-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #2c3e50;
            --verse-hover: rgba(20, 160, 133, 0.1);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            --dark-bg: #1a1a2e;
            --dark-card: #16213e;
            --badge-gold: #ffd700;
            --badge-silver: #c0c0c0;
            --badge-bronze: #cd7f32;
            --mushaf-bg: #f8f7f2;
            --mushaf-border: #d4af37;
            --verse-number-bg: #d4af37;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: var(--background-gradient);
            min-height: 100vh;
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        
        body.dark-mode {
            background: var(--dark-bg);
            color: #eee;
            --mushaf-bg: #2d3748;
            --mushaf-border: #b8860b;
            --verse-number-bg: #b8860b;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease-out;
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
        }
        
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© */
        .settings-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            display: none;
            z-index: 1000;
            box-shadow: var(--shadow);
            min-width: 250px;
        }
        
        .dark-mode .settings-panel {
            background: var(--dark-card);
        }
        
        .settings-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 1001;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }
        
        .settings-btn:hover {
            transform: rotate(90deg) scale(1.1);
        }
        
        .settings-option {
            margin-bottom: 15px;
        }
        
        .settings-option label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .settings-option input,
        .settings-option select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
        }
        
        .dark-mode .settings-option input,
        .dark-mode .settings-option select {
            background: #2d3748;
            color: white;
            border-color: #4a5568;
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            color: white;
            transition: all 0.3s;
            font-size: 16px;
            position: relative;
        }
        
        .tab-btn.active {
            background: white;
            color: var(--primary-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .tab-btn.memorization-tab.active {
            background: var(--memorization-color);
            color: white;
        }
        
        .dark-mode .tab-btn.active {
            background: var(--dark-card);
            color: white;
        }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
        .controls-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease-out;
        }
        
        .dark-mode .controls-panel {
            background: var(--dark-card);
        }
        
        .control-section {
            margin-bottom: 20px;
        }
        
        .control-section:last-child {
            margin-bottom: 0;
        }
        
        .control-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        
        .dark-mode .control-section label {
            color: #4cc9f0;
        }
        
        .select-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            align-items: end;
        }
        
        select, button, input {
            padding: 12px 16px;
            border: 2px solid #e3e8ec;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
            background: white;
        }
        
        .dark-mode select, 
        .dark-mode button, 
        .dark-mode input {
            background: #2d3748;
            color: white;
            border-color: #4a5568;
        }
        
        select:focus, button:focus, input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(20, 160, 133, 0.1);
        }
        
        .btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            min-height: 48px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø®Ø§ØµØ© */
        .memorization-controls {
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
            border: 2px solid var(--memorization-color);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .memorization-controls h3 {
            color: var(--memorization-color);
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .memorization-settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .memorization-btn {
            background: var(--memorization-color);
            min-width: 140px;
        }
        
        .waiting-indicator {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.2), rgba(243, 156, 18, 0.2));
            border: 2px solid var(--waiting-color);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
            color: #8b4513;
            display: none;
            animation: waitingPulse 2s infinite;
        }
        
        @keyframes waitingPulse {
            0% { background: rgba(241, 196, 15, 0.2); }
            50% { background: rgba(241, 196, 15, 0.4); }
            100% { background: rgba(241, 196, 15, 0.2); }
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
        .playback-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 15px;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ ÙˆØ§Ù„Ø¥ÙŠÙ‚Ø§Ù Ù…Ù†ÙØµÙ„Ø© */
        .main-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .play-btn {
            background: var(--success-color);
            min-width: 140px;
        }
        
        .pause-btn {
            background: var(--accent-color);
            min-width: 140px;
        }
        
        .stop-btn {
            background: var(--error-color);
            min-width: 140px;
        }
        
        .playback-controls button {
            min-width: 140px;
            background: var(--accent-color);
            flex: 1;
        }
        
        .repeat-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .repeat-btn {
            background: var(--success-color);
            font-size: 14px;
            padding: 10px 20px;
            flex: 1;
            min-width: 180px;
        }
        
        .repeat-btn.active {
            background: var(--error-color);
            animation: pulse 2s infinite;
        }
        
        .speed-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .speed-btn {
            background: #9b59b6;
            font-size: 14px;
            padding: 8px 16px;
            min-width: 60px;
        }
        
        .speed-btn.active {
            background: var(--error-color);
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }
        
        .verse-navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .nav-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        
        .nav-btn:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙˆØ±Ø© - ØªØµÙ…ÙŠÙ… ÙŠØ­Ø§ÙƒÙŠ Ø§Ù„Ù…ØµØ­Ù */
        .surah-content {
            background: var(--mushaf-bg);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.5s ease-out;
            border: 3px solid var(--mushaf-border);
            position: relative;
        }
        
        .dark-mode .surah-content {
            background: var(--dark-card);
        }
        
        /* Ø²Ø®Ø§Ø±Ù Ø§Ù„Ù…ØµØ­Ù */
        .surah-content::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            height: 3px;
            background: linear-gradient(90deg, var(--mushaf-border), transparent, var(--mushaf-border));
        }
        
        .surah-content::after {
            content: '';
            position: absolute;
            bottom: 15px;
            left: 15px;
            right: 15px;
            height: 3px;
            background: linear-gradient(90deg, var(--mushaf-border), transparent, var(--mushaf-border));
        }
        
        .surah-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, var(--mushaf-border), #f4e07a);
            border-radius: 15px;
            position: relative;
        }
        
        .surah-title {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            color: #8b4513;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .surah-info {
            color: #5d4e37;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .dark-mode .surah-title {
            color: #daa520;
        }
        
        .dark-mode .surah-info {
            color: #b8860b;
        }
        
        /* Ø§Ù„Ø¨Ø³Ù…Ù„Ø© */
        .basmala {
            text-align: center;
            font-family: 'Amiri', serif;
            font-size: 2.2rem;
            margin: 30px 0;
            color: var(--mushaf-border);
            font-weight: 700;
            padding: 20px;
            border: 2px solid var(--mushaf-border);
            border-radius: 15px;
            background: rgba(212, 175, 55, 0.1);
        }
        
        /* Ø§Ù„Ø¢ÙŠØ§Øª */
        .verses-container {
            line-height: 2.5;
            text-align: justify;
        }
        
        .verse {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            margin: 20px 0;
            padding: 20px 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border-right: 5px solid transparent;
            background: rgba(255, 255, 255, 0.5);
            text-align: justify;
            word-spacing: 2px;
        }
        
        .dark-mode .verse {
            color: #e2e8f0;
            background: rgba(45, 55, 72, 0.5);
        }
        
        .verse:hover {
            background: var(--verse-hover);
            border-right-color: var(--secondary-color);
            transform: translateX(-8px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }
        
        .verse.playing {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.2));
            border: 3px solid var(--highlight-color);
            box-shadow: 0 0 25px rgba(255, 159, 243, 0.6);
            transform: translateX(-12px);
            animation: playingPulse 2s infinite;
        }
        
        .verse.waiting-for-repeat {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.3), rgba(243, 156, 18, 0.3));
            border: 3px solid var(--waiting-color);
            box-shadow: 0 0 25px rgba(241, 196, 15, 0.6);
            transform: translateX(-12px);
            animation: waitingPulse 2s infinite;
        }
        
        .verse.paused {
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.2), rgba(230, 126, 34, 0.2));
            border: 3px solid var(--accent-color);
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.5);
            transform: translateX(-8px);
        }
        
        .verse.completed {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.2), rgba(46, 204, 113, 0.2));
            border-right-color: var(--success-color);
        }
        
        .verse.completed::after {
            content: 'âœ“';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--success-color);
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        /* Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¢ÙŠØ§Øª */
        .verse-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--verse-number-bg);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 16px;
            margin: 0 10px;
            font-weight: bold;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* Ù…Ø¯Ø© Ø§Ù„Ø¢ÙŠØ© ÙˆÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        .verse-duration {
            position: absolute;
            left: 15px;
            top: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .verse:hover .verse-duration {
            opacity: 1;
            visibility: visible;
        }
        
        .wait-time-display {
            position: absolute;
            right: 15px;
            top: 15px;
            background: var(--waiting-color);
            color: #8b4513;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .verse.waiting-for-repeat .wait-time-display {
            opacity: 1;
            visibility: visible;
        }
        
        /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        .countdown-display {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            background: var(--waiting-color);
            color: #8b4513;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid #8b4513;
            animation: countdownPulse 1s infinite;
        }
        
        @keyframes countdownPulse {
            0% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.1); }
            100% { transform: translateY(-50%) scale(1); }
        }
        
        /* ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© */
        .word-highlight {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #8b4513;
            padding: 3px 6px;
            border-radius: 8px;
            transition: all 0.4s;
            animation: wordGlow 1.5s infinite alternate;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
        }
        
        @keyframes wordGlow {
            0% { 
                background: linear-gradient(135deg, #ffd700, #ffed4e);
                transform: scale(1);
            }
            100% { 
                background: linear-gradient(135deg, #ffed4e, #ffd700);
                transform: scale(1.05);
            }
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-section {
            margin: 25px 0;
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .dark-mode .progress-bar {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--accent-color), var(--success-color));
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-text {
            text-align: center;
            margin-top: 8px;
            font-size: 1rem;
            color: white;
            font-weight: 600;
        }
        
        .dark-mode .progress-text {
            color: #e2e8f0;
        }
        
        /* Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø¹Ø§Ø¦Ù… - Ù…Ø¶ØºÙˆØ· */
        .audio-player {
            position: fixed;
            top: 80px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px);
            width: 320px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            display: none;
            max-height: 120px;
        }
        
        .audio-player.minimized {
            width: 60px;
            height: 60px;
            padding: 10px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
        }
        
        .audio-player.minimized * {
            display: none;
        }
        
        .audio-player.minimized::before {
            content: 'ğŸµ';
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            width: 100%;
            height: 100%;
        }
        
        .audio-player.minimized:hover {
            transform: scale(1.1);
        }
        
        .audio-player:hover {
            background: rgba(255, 255, 255, 0.98);
        }
        
        .dark-mode .audio-player {
            background: rgba(26, 32, 44, 0.95);
            border-color: rgba(76, 201, 240, 0.2);
        }
        
        .dark-mode .audio-player:hover {
            background: rgba(26, 32, 44, 0.98);
        }
        
        .audio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .now-playing {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 12px;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .dark-mode .now-playing {
            color: #4cc9f0;
        }
        
        .audio-controls-compact {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        
        .minimize-btn, .close-audio {
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            color: var(--text-color);
            opacity: 0.7;
            transition: opacity 0.2s;
            padding: 5px;
        }
        
        .minimize-btn:hover, .close-audio:hover {
            opacity: 1;
        }
        
        .dark-mode .minimize-btn, .dark-mode .close-audio {
            color: white;
        }
        
        /* Ù…Ø´ØºÙ„ ØµÙˆØªÙŠ Ù…Ø¶ØºÙˆØ· ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ */
        .audio-player-top {
            position: fixed;
            top: 20px;
            right: 50%;
            transform: translateX(50%);
            z-index: 999;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 15px;
            border-radius: 25px;
            color: white;
            font-size: 12px;
            display: none;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .audio-player-top.visible {
            display: flex;
        }
        
        .audio-player-top .play-pause-btn {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 2px 5px;
        }
        
        .audio-player-top .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            padding: 2px 5px;
            opacity: 0.7;
        }
        
        .audio-player-top .close-btn:hover {
            opacity: 1;
        }
        
        .audio-controls {
            margin-top: 15px;
        }
        
        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .speed-control label {
            font-weight: 600;
        }
        
        .speed-control input {
            flex-grow: 1;
            margin: 0;
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .loading {
            text-align: center;
            padding: 60px 40px;
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .dark-mode .loading {
            color: #4cc9f0;
        }
        
        .loading::before {
            content: '';
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(13, 115, 119, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        .dark-mode .loading::before {
            border-top-color: #4cc9f0;
        }
        
        .error {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            color: #c62828;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-right: 5px solid #c62828;
            font-weight: 600;
        }
        
        .dark-mode .error {
            background: linear-gradient(135deg, #2d0000, #1a0000);
            color: #ff6b6b;
            border-right-color: #ff6b6b;
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ© */
        .info-message {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #1565c0;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-right: 5px solid #1565c0;
            font-weight: 600;
        }
        
        .dark-mode .info-message {
            background: linear-gradient(135deg, #001a2e, #001122);
            color: #4fc3f7;
            border-right-color: #4fc3f7;
        }
        
        .success-message {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            color: #2e7d32;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-right: 5px solid #2e7d32;
            font-weight: 600;
        }
        
        .dark-mode .success-message {
            background: linear-gradient(135deg, #002e00, #001a00);
            color: #66bb6a;
            border-right-color: #66bb6a;
        }
        
        /* Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes playingPulse {
            0% { box-shadow: 0 0 25px rgba(255, 159, 243, 0.6); }
            50% { box-shadow: 0 0 35px rgba(255, 159, 243, 0.8); }
            100% { box-shadow: 0 0 25px rgba(255, 159, 243, 0.6); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin-bottom: 80px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls-panel {
                padding: 20px;
            }
            
            .select-group {
                grid-template-columns: 1fr;
            }
            
            .playback-controls {
                flex-direction: column;
            }
            
            .playback-controls button {
                min-width: auto;
                width: 100%;
            }
            
            .main-controls {
                flex-direction: column;
            }
            
            .main-controls button {
                width: 100%;
            }
            
            .repeat-controls {
                flex-direction: column;
            }
            
            .repeat-btn {
                min-width: auto;
                width: 100%;
            }
            
            .speed-controls {
                justify-content: center;
            }
            
            .memorization-settings {
                grid-template-columns: 1fr;
            }
            
            .verse {
                font-size: 1.6rem;
                padding: 15px 20px;
            }
            
            .surah-content {
                padding: 25px;
                margin-bottom: 100px;
            }
            
            .audio-player {
                bottom: 10px;
                left: 10px;
                right: 10px;
                width: auto;
                max-height: 80px;
                padding: 10px;
            }
            
            .audio-player-top {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: none;
                border-radius: 10px;
            }
            
            .settings-panel {
                right: 10px;
                left: 10px;
                top: 80px;
            }
            
            .basmala {
                font-size: 1.8rem;
                padding: 15px;
            }
            
            .surah-title {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .verse {
                font-size: 1.4rem;
                padding: 12px 15px;
            }
            
            .surah-content {
                padding: 20px;
            }
            
            .basmala {
                font-size: 1.5rem;
                padding: 12px;
            }
            
            .verse-number {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }
        
        /* ØªØ®ØµÙŠØµØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø´ÙƒÙ„ Ø§Ù„Ø£ÙØ¶Ù„ */
        .reading-mode .verse {
            background: var(--mushaf-bg);
            border: 1px solid var(--mushaf-border);
            margin: 15px 0;
        }
        
        .reading-mode .verse:hover {
            background: rgba(212, 175, 55, 0.1);
        }
        
        /* Ø®Ø·ÙˆØ· Ù…Ø®ØµØµØ© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© */
        .verse.uthmani-font {
            font-family: 'Hafs', 'Amiri', serif;
            font-size: 2.2rem;
            line-height: 2.8;
        }
    </style>
</head>
<body>
    <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <button class="settings-btn" onclick="toggleSettings()" aria-label="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">âš™ï¸</button>
    
    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <div class="settings-panel" id="settingsPanel" role="dialog" aria-labelledby="settingsTitle">
        <h3 id="settingsTitle">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
        
        <div class="settings-option">
            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
            <label for="darkModeToggle">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</label>
        </div>
        
        <div class="settings-option">
            <label for="fontSize">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·:</label>
            <select id="fontSize" onchange="changeFontSize()">
                <option value="1.6rem">ØµØºÙŠØ±</option>
                <option value="1.8rem">Ø¹Ø§Ø¯ÙŠ</option>
                <option value="2rem" selected>Ù…ØªÙˆØ³Ø·</option>
                <option value="2.2rem">ÙƒØ¨ÙŠØ±</option>
                <option value="2.4rem">ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹</option>
            </select>
        </div>
        
        <div class="settings-option">
            <label for="fontType">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·:</label>
            <select id="fontType" onchange="changeFontType()">
                <option value="amiri">Ø¹Ø§Ø¯ÙŠ</option>
                <option value="uthmani">Ø¹Ø«Ù…Ø§Ù†ÙŠ (Ù…ØµØ­ÙÙŠ)</option>
            </select>
        </div>
        
        <div class="settings-option">
            <label for="readingMode">ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©:</label>
            <input type="checkbox" id="readingMode" onchange="toggleReadingMode()">
            <label for="readingMode">ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…ØµØ­Ù</label>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ•Œ Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h1>
            <p>ØªØ¹Ù„Ù… ÙˆØ­ÙØ¸ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ù…ØªØ¹Ø©</p>
        </div>
        
        <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('learning')" data-tab="learning">
                ğŸ“– Ø§Ù„ØªØ¹Ù„Ù… ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø§Ø¹
            </button>
            <button class="tab-btn memorization-tab" onclick="switchTab('memorization')" data-tab="memorization">
                ğŸ§  Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
            </button>
            <button class="tab-btn" onclick="switchTab('reading')" data-tab="reading">
                ğŸ“š Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ©
            </button>
        </div>
        
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="controls-panel" id="learningControls">
            <div class="control-section">
                <label for="surahSelect">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©:</label>
                <div class="select-group">
                    <select id="surahSelect" aria-describedby="surahHint">
                        <option value="">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</option>
                    </select>
                    <button class="btn" onclick="loadSurah()" aria-describedby="loadHint">
                        ğŸ“– ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©
                    </button>
                </div>
                <small id="surahHint">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ ØªØ¹Ù„Ù…Ù‡Ø§ Ø£Ùˆ Ø­ÙØ¸Ù‡Ø§</small>
            </div>
            
            <div class="control-section">
                <label for="reciterSelect">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦:</label>
                <select id="reciterSelect" aria-describedby="reciterHint">
                    <option value="ar.alafasy">Ù…Ø´Ø§Ø±ÙŠ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
                    <option value="ar.husary">Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ</option>
                    <option value="ar.minshawi">Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
                    <option value="ar.abdulbasit">Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯</option>
                    <option value="ar.sudais">Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¯ÙŠØ³</option>
                    <option value="ar.shaatri">Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„Ø´Ø§Ø·Ø±ÙŠ</option>
                    <option value="ar.maher">Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ</option>
                </select>
                <small id="reciterHint">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ø¯ÙŠÙƒ</small>
            </div>
            
            <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ -->
            <div class="memorization-controls" id="memorizationSettings" style="display: none;">
                <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸</h3>
                <div class="memorization-settings">
                    <div class="control-section">
                        <label for="waitTimeSelect">ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„ØªØ±Ø¯ÙŠØ¯:</label>
                        <select id="waitTimeSelect">
                            <option value="3">3 Ø«ÙˆØ§Ù†Ù</option>
                            <option value="5" selected>5 Ø«ÙˆØ§Ù†Ù</option>
                            <option value="7">7 Ø«ÙˆØ§Ù†Ù</option>
                            <option value="10">10 Ø«ÙˆØ§Ù†Ù</option>
                            <option value="15">15 Ø«Ø§Ù†ÙŠØ©</option>
                            <option value="auto">ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø­Ø³Ø¨ Ø·ÙˆÙ„ Ø§Ù„Ø¢ÙŠØ©)</option>
                        </select>
                    </div>
                    
                    <div class="control-section">
                        <label for="repetitionSelect">Ø¹Ø¯Ø¯ ØªÙƒØ±Ø§Ø±Ø§Øª Ø§Ù„Ø¢ÙŠØ©:</label>
                        <select id="repetitionSelect">
                            <option value="1" selected>Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</option>
                            <option value="2">Ù…Ø±ØªØ§Ù†</option>
                            <option value="3">3 Ù…Ø±Ø§Øª</option>
                            <option value="5">5 Ù…Ø±Ø§Øª</option>
                            <option value="unlimited">Ø¨Ø¯ÙˆÙ† Ø­Ø¯ (ÙŠØ¯ÙˆÙŠ)</option>
                        </select>
                    </div>
                </div>
                
                <div class="main-controls">
                    <button class="btn memorization-btn" onclick="startMemorizationMode()" disabled id="startMemorizationBtn">
                        ğŸ§  Ø¨Ø¯Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                    </button>
                    <button class="btn memorization-btn" onclick="nextVerseInMemorization()" disabled id="nextMemorizationBtn">
                        â­ï¸ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
                    </button>
                </div>
            </div>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
            <div class="main-controls" id="normalControls">
                <button class="btn play-btn" onclick="playAll()" disabled id="playAllBtn">
                    â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©
                </button>
                <button class="btn pause-btn" onclick="pauseAudio()" disabled id="pauseBtn">
                    â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
                </button>
                <button class="btn stop-btn" onclick="stopAudio()" disabled id="stopBtn">
                    â¹ï¸ ØªÙˆÙ‚Ù ÙƒØ§Ù…Ù„
                </button>
            </div>
            
            <div class="playback-controls" id="extraControls">
                <button class="btn" onclick="playCurrentPage()" disabled id="playPageBtn">
                    ğŸ“„ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                </button>
            </div>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù… -->
            <div class="repeat-controls" id="repeatControls">
                <button class="btn repeat-btn" onclick="toggleRepeatVerse()" id="repeatVerseBtn">
                    ğŸ” ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ©
                </button>
                <button class="btn repeat-btn" onclick="toggleRepeatSurah()" id="repeatSurahBtn">
                    ğŸ”„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø©
                </button>
                <button class="btn repeat-btn active" onclick="toggleAutoPlay()" id="autoPlayBtn">
                    â­ï¸ ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ
                </button>
            </div>
            
            <!-- Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© -->
            <div class="speed-controls">
                <label>Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ´ØºÙŠÙ„:</label>
                <button class="btn speed-btn" onclick="setPlaybackSpeed(0.5)">0.5Ã—</button>
                <button class="btn speed-btn" onclick="setPlaybackSpeed(0.75)">0.75Ã—</button>
                <button class="btn speed-btn active" onclick="setPlaybackSpeed(1)">1Ã—</button>
                <button class="btn speed-btn" onclick="setPlaybackSpeed(1.25)">1.25Ã—</button>
                <button class="btn speed-btn" onclick="setPlaybackSpeed(1.5)">1.5Ã—</button>
            </div>
            
            <!-- Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¢ÙŠØ§Øª -->
            <div class="verse-navigation">
                <button class="nav-btn" onclick="navigateVerse(-1)" disabled id="prevVerseBtn" aria-label="Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©">
                    â—€
                </button>
                <button class="nav-btn" onclick="navigateVerse(1)" disabled id="nextVerseBtn" aria-label="Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©">
                    â–¶
                </button>
            </div>
            
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
            <div class="progress-section">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¯</div>
            </div>
            
            <!-- Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ -->
            <div class="waiting-indicator" id="waitingIndicator">
                <div>â° Ø§Ù†ØªØ¸Ø§Ø± ØªØ±Ø¯ÙŠØ¯ Ø§Ù„Ø·ÙÙ„...</div>
                <div id="countdownText">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ±Ø¯ÙŠØ¯ Ø®Ù„Ø§Ù„ <span id="countdown">5</span> Ø«ÙˆØ§Ù†Ù</div>
            </div>
        </div>
        
        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙˆØ±Ø© -->
        <div class="surah-content" id="surahContent">
            <div class="loading">
                Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…...
                <br><small>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</small>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ø¹Ø§Ø¯ÙŠ -->
    <div class="audio-player" id="audioPlayer">
        <div class="audio-header">
            <div class="now-playing" id="nowPlaying">Ù„Ø§ ÙŠØªÙ… ØªØ´ØºÙŠÙ„ Ø´ÙŠØ¡</div>
            <div class="audio-controls-compact">
                <button class="minimize-btn" onclick="minimizePlayer()" title="ØªØµØºÙŠØ±" aria-label="ØªØµØºÙŠØ± Ø§Ù„Ù…Ø´ØºÙ„">â”€</button>
                <button class="close-audio" onclick="hideAudioPlayer()" aria-label="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´ØºÙ„">âœ•</button>
            </div>
        </div>
        
        <audio id="audioElement" controls preload="metadata" style="width: 100%; height: 30px; border-radius: 8px;">
            Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        </audio>
        
        <div class="audio-controls">
            <div class="speed-control">
                <label for="audioSpeedRange">Ø§Ù„Ø³Ø±Ø¹Ø©:</label>
                <input type="range" id="audioSpeedRange" min="0.5" max="2" step="0.1" value="1" 
                       oninput="changeAudioSpeed(this.value)" aria-describedby="speedValue">
                <span id="speedValue">1Ã—</span>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ù…Ø¶ØºÙˆØ· ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ -->
    <div class="audio-player-top" id="audioPlayerTop">
        <button class="play-pause-btn" onclick="togglePlayPause()" id="topPlayPauseBtn">â¸ï¸</button>
        <span id="topNowPlaying">Ø§Ù„Ø¢ÙŠØ© 1</span>
        <button class="close-btn" onclick="stopAudio()">âœ•</button>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let currentSurah = null;
        let currentAudio = null;
        let currentVerseIndex = 0;
        let isPlaying = false;
        let isPaused = false;
        let repeatVerse = false;
        let repeatSurah = false;
        let autoPlay = true;
        let playedVerses = new Set();
        let completedVerses = JSON.parse(localStorage.getItem('completedVerses')) || {};
        let listenCount = JSON.parse(localStorage.getItem('listenCount')) || {};
        let playbackSpeed = parseFloat(localStorage.getItem('playbackSpeed')) || 1;
        let darkMode = localStorage.getItem('darkMode') === 'true';
        let fontSize = localStorage.getItem('fontSize') || '2rem';
        let fontType = localStorage.getItem('fontType') || 'amiri';
        let readingMode = localStorage.getItem('readingMode') === 'true';
        let currentHighlightedWords = [];
        let verseDurations = {}; // Ù„Ø­ÙØ¸ Ù…Ø¯Ø¯ Ø§Ù„Ø¢ÙŠØ§Øª
        let currentTab = 'learning'; // Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        
        // Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        let memorizationMode = false;
        let isWaitingForRepeat = false;
        let waitTime = 5; // Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±
        let repetitionCount = 1; // Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
        let currentRepetition = 0; // Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
        let waitingTimer = null;
        let countdownInterval = null;
        let memorizationVerseIndex = 0;
        
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API
        const API_BASE = 'https://api.alquran.cloud/v1';
        const BACKUP_API = 'https://api.quran.com/api/v4';
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadSurahsList();
            applySettings();
            setupKeyboardControls();
        });
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initializeApp() {
            console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø§Ù„Ù…Ø·ÙˆØ± Ù…Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸');
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            applySettings();
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            setupEventListeners();
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…Ø©
            window.addEventListener('error', handleGlobalError);
            
            console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupEventListeners() {
            // ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø±Ø¦
            document.getElementById('reciterSelect').addEventListener('change', function() {
                if (currentSurah && document.getElementById('surahSelect').value) {
                    loadSurah();
                }
            });
            
            // ØªØºÙŠÙŠØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­ÙØ¸
            document.getElementById('waitTimeSelect').addEventListener('change', function() {
                waitTime = this.value === 'auto' ? 'auto' : parseInt(this.value);
            });
            
            document.getElementById('repetitionSelect').addEventListener('change', function() {
                repetitionCount = this.value === 'unlimited' ? 'unlimited' : parseInt(this.value);
            });
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            document.addEventListener('click', function(e) {
                const settingsPanel = document.getElementById('settingsPanel');
                const settingsBtn = document.querySelector('.settings-btn');
                
                if (!settingsPanel.contains(e.target) && !settingsBtn.contains(e.target)) {
                    settingsPanel.style.display = 'none';
                }
            });
            
            // Ù…ØªØ§Ø¨Ø¹Ø© ØªÙ‚Ø¯Ù… Ø§Ù„ØµÙˆØª
            const audioElement = document.getElementById('audioElement');
            audioElement.addEventListener('timeupdate', updateAudioProgress);
            audioElement.addEventListener('ended', handleAudioEnded);
            audioElement.addEventListener('error', handleAudioError);
            audioElement.addEventListener('loadstart', () => updatePlaybackButtons(false));
            audioElement.addEventListener('canplay', () => updatePlaybackButtons(true));
            audioElement.addEventListener('loadedmetadata', saveVerseDuration);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†
        function switchTab(tabName) {
            currentTab = tabName;
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
            const memorizationSettings = document.getElementById('memorizationSettings');
            const normalControls = document.getElementById('normalControls');
            const extraControls = document.getElementById('extraControls');
            const repeatControls = document.getElementById('repeatControls');
            const waitingIndicator = document.getElementById('waitingIndicator');
            
            if (tabName === 'memorization') {
                // ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                memorizationSettings.style.display = 'block';
                normalControls.style.display = 'none';
                extraControls.style.display = 'none';
                repeatControls.style.display = 'none';
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
                if (isPlaying || isPaused) {
                    stopAudio();
                }
                
                showInfo('ğŸ§  ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ: Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø³ÙŠÙ‚Ø±Ø£ Ø§Ù„Ø¢ÙŠØ© Ø«Ù… ÙŠÙ†ØªØ¸Ø± Ù„ØªØ±Ø¯Ø¯ Ø®Ù„ÙÙ‡');
                
            } else if (tabName === 'learning') {
                // ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ
                memorizationSettings.style.display = 'none';
                normalControls.style.display = 'flex';
                extraControls.style.display = 'block';
                repeatControls.style.display = 'flex';
                waitingIndicator.style.display = 'none';
                
                // Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
                if (memorizationMode) {
                    stopMemorizationMode();
                }
                
            } else if (tabName === 'reading') {
                // ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ©
                memorizationSettings.style.display = 'none';
                normalControls.style.display = 'flex';
                extraControls.style.display = 'none';
                repeatControls.style.display = 'none';
                waitingIndicator.style.display = 'none';
                
                showInfo('ğŸ“š ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ù„Ù… Ø­Ø§Ù„ÙŠØ§Ù‹');
            }
            
            console.log(`ğŸ“‘ ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨: ${tabName}`);
        }
        
        // Ø¨Ø¯Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
        function startMemorizationMode() {
            if (!currentSurah) {
                showError('ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            memorizationMode = true;
            memorizationVerseIndex = 0;
            currentRepetition = 0;
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            const waitTimeSelect = document.getElementById('waitTimeSelect');
            if (waitTimeSelect.value === 'auto') {
                waitTime = 'auto';
            } else {
                waitTime = parseInt(waitTimeSelect.value);
            }
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
            const repetitionSelect = document.getElementById('repetitionSelect');
            if (repetitionSelect.value === 'unlimited') {
                repetitionCount = 'unlimited';
            } else {
                repetitionCount = parseInt(repetitionSelect.value);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.getElementById('startMemorizationBtn').disabled = true;
            document.getElementById('nextMemorizationBtn').disabled = false;
            
            // Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ Ø¢ÙŠØ©
            playVerseInMemorizationMode(memorizationVerseIndex);
            
            showSuccess('ğŸ§  ØªÙ… Ø¨Ø¯Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ! Ø§Ø³ØªÙ…Ø¹ Ø«Ù… Ø±Ø¯Ø¯ Ø®Ù„Ù Ø§Ù„Ù‚Ø§Ø±Ø¦');
            console.log('ğŸ§  Ø¨Ø¯Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ');
        }
        
        // ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
        async function playVerseInMemorizationMode(verseIndex) {
            if (!currentSurah || verseIndex < 0 || verseIndex >= currentSurah.text.ayahs.length) {
                console.warn('âš ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸');
                return;
            }
            
            try {
                currentVerseIndex = verseIndex;
                memorizationVerseIndex = verseIndex;
                const audioUrl = currentSurah.audio.ayahs[verseIndex].audio;
                const verseText = currentSurah.text.ayahs[verseIndex].text;
                const verseElement = document.querySelector(`[data-verse="${verseIndex}"]`);
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø§Ù„ÙŠ
                clearWaitingState();
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¬Ø¯ÙŠØ¯
                const audioElement = document.getElementById('audioElement');
                audioElement.src = audioUrl;
                audioElement.playbackRate = playbackSpeed;
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´ØºÙ„
                document.getElementById('audioPlayer').style.display = 'block';
                document.getElementById('audioPlayerTop').classList.add('visible');
                document.getElementById('nowPlaying').textContent = 
                    `Ø§Ù„Ø­ÙØ¸ - Ø§Ù„Ø¢ÙŠØ© ${verseIndex + 1} - Ø³ÙˆØ±Ø© ${currentSurah.text.name}`;
                document.getElementById('topNowPlaying').textContent = 
                    `Ø­ÙØ¸ ${verseIndex + 1}`;
                
                // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                document.querySelectorAll('.verse').forEach(v => {
                    v.classList.remove('playing', 'paused', 'waiting-for-repeat');
                });
                verseElement.classList.add('playing');
                
                // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ©
                verseElement.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª
                setupWordHighlighting(verseElement, verseText);
                
                // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
                await audioElement.play();
                isPlaying = true;
                isPaused = false;
                isWaitingForRepeat = false;
                
                updatePlayPauseButtons();
                
                console.log(`ğŸ§  ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© ${verseIndex + 1} ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ (Ø§Ù„ØªÙƒØ±Ø§Ø± ${currentRepetition + 1})`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¢ÙŠØ© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
        function handleMemorizationAudioEnded() {
            clearWordHighlights();
            isPlaying = false;
            isPaused = false;
            
            const verseElement = document.querySelector(`[data-verse="${memorizationVerseIndex}"]`);
            verseElement.classList.remove('playing');
            verseElement.classList.add('waiting-for-repeat');
            
            // Ø­Ø³Ø§Ø¨ Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            let actualWaitTime = waitTime;
            if (waitTime === 'auto') {
                // Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ø¢ÙŠØ©
                const verseText = currentSurah.text.ayahs[memorizationVerseIndex].text;
                const wordCount = verseText.split(' ').length;
                actualWaitTime = Math.max(5, Math.min(15, wordCount * 0.8));
            }
            
            // Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            showWaitingIndicator(actualWaitTime);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
            startWaitingCountdown(actualWaitTime);
            
            console.log(`â° Ø§Ù†ØªØ¸Ø§Ø± ØªØ±Ø¯ÙŠØ¯ Ø§Ù„Ø·ÙÙ„ Ù„Ù…Ø¯Ø© ${actualWaitTime} Ø«Ø§Ù†ÙŠØ©`);
        }
        
        // Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function showWaitingIndicator(waitSeconds) {
            const waitingIndicator = document.getElementById('waitingIndicator');
            const countdownText = document.getElementById('countdownText');
            const countdownSpan = document.getElementById('countdown');
            
            countdownSpan.textContent = Math.ceil(waitSeconds);
            countdownText.innerHTML = `ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ±Ø¯ÙŠØ¯ Ø®Ù„Ø§Ù„ <span id="countdown">${Math.ceil(waitSeconds)}</span> Ø«ÙˆØ§Ù†Ù`;
            
            waitingIndicator.style.display = 'block';
            isWaitingForRepeat = true;
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function startWaitingCountdown(waitSeconds) {
            let remainingTime = waitSeconds;
            const countdownSpan = document.getElementById('countdown');
            const verseElement = document.querySelector(`[data-verse="${memorizationVerseIndex}"]`);
            
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø§Ø¯ Ø¨ØµØ±ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ©
            const countdownDisplay = document.createElement('div');
            countdownDisplay.className = 'countdown-display';
            countdownDisplay.textContent = Math.ceil(remainingTime);
            verseElement.appendChild(countdownDisplay);
            
            countdownInterval = setInterval(() => {
                remainingTime -= 0.1;
                const seconds = Math.ceil(remainingTime);
                
                countdownSpan.textContent = seconds;
                countdownDisplay.textContent = seconds;
                
                if (remainingTime <= 0) {
                    clearInterval(countdownInterval);
                    countdownDisplay.remove();
                    handleWaitingTimeout();
                }
            }, 100);
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function handleWaitingTimeout() {
            clearWaitingState();
            
            currentRepetition++;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
            if (repetitionCount === 'unlimited') {
                // ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠØŒ Ù†Ù†ØªØ¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙŠØ¶ØºØ· "Ø§Ù„ØªØ§Ù„ÙŠ"
                showSuccess('Ø§Ù†ØªÙ‡Øª ÙØªØ±Ø© Ø§Ù„ØªØ±Ø¯ÙŠØ¯. Ø§Ø¶ØºØ· "Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©" Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ùˆ ÙƒØ±Ø± Ø§Ù„Ø¢ÙŠØ© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
                return;
            }
            
            if (currentRepetition < repetitionCount) {
                // ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„Ø¢ÙŠØ©
                setTimeout(() => {
                    playVerseInMemorizationMode(memorizationVerseIndex);
                }, 1000);
            } else {
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
                setTimeout(() => {
                    nextVerseInMemorization();
                }, 1500);
            }
        }
        
        // Ù…Ø³Ø­ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function clearWaitingState() {
            const waitingIndicator = document.getElementById('waitingIndicator');
            waitingIndicator.style.display = 'none';
            
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            
            if (waitingTimer) {
                clearTimeout(waitingTimer);
                waitingTimer = null;
            }
            
            // Ø¥Ø²Ø§Ù„Ø© Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù…Ù† Ø§Ù„Ø¢ÙŠØ§Øª
            document.querySelectorAll('.countdown-display').forEach(el => el.remove());
            
            isWaitingForRepeat = false;
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
        function nextVerseInMemorization() {
            if (!memorizationMode) return;
            
            memorizationVerseIndex++;
            currentRepetition = 0;
            
            // Ø¥Ø²Ø§Ù„Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù† Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            document.querySelectorAll('.verse').forEach(v => {
                v.classList.remove('waiting-for-repeat');
            });
            
            if (memorizationVerseIndex >= currentSurah.text.ayahs.length) {
                // Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø³ÙˆØ±Ø©
                stopMemorizationMode();
                showSuccess('ğŸ‰ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø­ÙØ¸ Ø§Ù„Ø³ÙˆØ±Ø©! Ø£Ø­Ø³Ù†Øª!');
                return;
            }
            
            // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©
            playVerseInMemorizationMode(memorizationVerseIndex);
        }
        
        // Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
        function stopMemorizationMode() {
            memorizationMode = false;
            isWaitingForRepeat = false;
            
            clearWaitingState();
            clearWordHighlights();
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.getElementById('startMemorizationBtn').disabled = !currentSurah;
            document.getElementById('nextMemorizationBtn').disabled = true;
            
            // Ù…Ø³Ø­ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¢ÙŠØ§Øª
            document.querySelectorAll('.verse').forEach(v => {
                v.classList.remove('playing', 'waiting-for-repeat', 'paused');
            });
            
            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª
            const audioElement = document.getElementById('audioElement');
            if (audioElement.src) {
                audioElement.pause();
                audioElement.currentTime = 0;
            }
            
            isPlaying = false;
            isPaused = false;
            
            hideAudioPlayer();
            
            console.log('ğŸ›‘ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸');
        }
        
        // Ø­ÙØ¸ Ù…Ø¯Ø© Ø§Ù„Ø¢ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveVerseDuration() {
            const audioElement = document.getElementById('audioElement');
            if (audioElement.duration && currentSurah && currentVerseIndex >= 0) {
                const verseKey = `${currentSurah.text.number}_${currentVerseIndex}`;
                verseDurations[verseKey] = audioElement.duration;
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¯Ø© ÙÙŠ Ø§Ù„Ø¢ÙŠØ©
                const verseElement = document.querySelector(`[data-verse="${currentVerseIndex}"]`);
                if (verseElement) {
                    updateVerseDurationDisplay(verseElement, audioElement.duration);
                }
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ù…Ø¯Ø© Ø§Ù„Ø¢ÙŠØ©
        function updateVerseDurationDisplay(verseElement, duration) {
            let durationElement = verseElement.querySelector('.verse-duration');
            if (!durationElement) {
                durationElement = document.createElement('div');
                durationElement.className = 'verse-duration';
                verseElement.appendChild(durationElement);
            }
            
            const minutes = Math.floor(duration / 60);
            const seconds = Math.floor(duration % 60);
            durationElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ø¢ÙŠØ©
        function updateVerseWaitTimeDisplay(verseElement, waitSeconds) {
            let waitTimeElement = verseElement.querySelector('.wait-time-display');
            if (!waitTimeElement) {
                waitTimeElement = document.createElement('div');
                waitTimeElement.className = 'wait-time-display';
                verseElement.appendChild(waitTimeElement);
            }
            
            waitTimeElement.textContent = `Ø§Ù†ØªØ¸Ø§Ø±: ${waitSeconds}Ø«`;
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function applySettings() {
            // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
            document.body.classList.toggle('dark-mode', darkMode);
            document.getElementById('darkModeToggle').checked = darkMode;
            
            // Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
            document.getElementById('fontSize').value = fontSize;
            
            // Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·
            document.getElementById('fontType').value = fontType;
            
            // ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
            document.body.classList.toggle('reading-mode', readingMode);
            document.getElementById('readingMode').checked = readingMode;
            
            // Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
            setPlaybackSpeed(playbackSpeed);
            
            console.log('âš™ï¸ ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©');
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£ÙØ¶Ù„ Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
        async function loadSurahsList() {
            try {
                showLoading('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±...');
                
                const response = await fetchWithFallback(`${API_BASE}/surah`);
                const data = await response.json();
                
                if (data.code === 200) {
                    const select = document.getElementById('surahSelect');
                    select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© --</option>';
                    
                    data.data.forEach(surah => {
                        const option = document.createElement('option');
                        option.value = surah.number;
                        option.textContent = `${surah.number}. ${surah.name} - ${surah.englishName} (${surah.numberOfAyahs} Ø¢ÙŠØ©)`;
                        select.appendChild(option);
                    });
                    
                    // ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø³ÙˆØ±Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø­ÙÙˆØ¸Ø©
                    const lastSurah = localStorage.getItem('lastSurah');
                    if (lastSurah) {
                        select.value = lastSurah;
                    }
                    
                    hideLoading();
                    showSuccess('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ± Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…');
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
        async function loadSurah() {
            const surahNumber = document.getElementById('surahSelect').value;
            const reciter = document.getElementById('reciterSelect').value;
            
            if (!surahNumber) {
                showError('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©');
                return;
            }
            
            try {
                showLoading('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© ÙˆÙ…Ù„ÙØ§Øª Ø§Ù„ØµÙˆØª...');
                updatePlaybackButtons(false);
                stopAudio(); // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØªØ´ØºÙŠÙ„ Ø­Ø§Ù„ÙŠ
                
                // Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
                if (memorizationMode) {
                    stopMemorizationMode();
                }
                
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Øµ ÙˆØ§Ù„ØµÙˆØª Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ§Ø²ÙŠ
                const [textResponse, audioResponse] = await Promise.all([
                    fetchWithFallback(`${API_BASE}/surah/${surahNumber}`),
                    fetchWithFallback(`${API_BASE}/surah/${surahNumber}/${reciter}`)
                ]);
                
                const textData = await textResponse.json();
                const audioData = await audioResponse.json();
                
                if (textData.code === 200 && audioData.code === 200) {
                    currentSurah = {
                        text: textData.data,
                        audio: audioData.data
                    };
                    
                    displaySurah();
                    resetPlayback();
                    updatePlaybackButtons(true);
                    
                    // ØªÙØ¹ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                    document.getElementById('startMemorizationBtn').disabled = false;
                    
                    // Ø­ÙØ¸ Ø§Ù„Ø³ÙˆØ±Ø© ÙÙŠ localStorage
                    localStorage.setItem('lastSurah', surahNumber);
                    localStorage.setItem('lastReciter', reciter);
                    
                    hideLoading();
                    showSuccess(`ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© ${textData.data.name} Ø¨Ù†Ø¬Ø§Ø­`);
                } else {
                    throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ±Ø©');
                }
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø§Ø±Ø¦ Ø¢Ø®Ø±.');
                updatePlaybackButtons(false);
                document.getElementById('startMemorizationBtn').disabled = true;
            }
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ…
        function displaySurah() {
            if (!currentSurah) return;
            
            const surah = currentSurah.text;
            const contentDiv = document.getElementById('surahContent');
            
            let html = `
                <div class="surah-header">
                    <h2 class="surah-title">${surah.name}</h2>
                    <div class="surah-info">
                        ${surah.englishName} - ${surah.englishNameTranslation}<br>
                        Ø¹Ø¯Ø¯ Ø§Ù„Ø¢ÙŠØ§Øª: ${surah.numberOfAyahs} - ${surah.revelationType === 'Meccan' ? 'Ù…ÙƒÙŠØ©' : 'Ù…Ø¯Ù†ÙŠØ©'}
                    </div>
                </div>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø³Ù…Ù„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø³ÙˆØ±Ø© Ø§Ù„ØªÙˆØ¨Ø©
            if (surah.number !== 9 && surah.number !== 1) {
                html += `
                    <div class="basmala">
                        Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù
                    </div>
                `;
            }
            
            html += '<div class="verses-container">';
            
            surah.ayahs.forEach((ayah, index) => {
                const verseKey = `${surah.number}_${index}`;
                const isCompleted = completedVerses[verseKey];
                const listenTimes = listenCount[verseKey] || 0;
                const duration = verseDurations[verseKey];
                
                html += `
                    <div class="verse ${isCompleted ? 'completed' : ''}" 
                         onclick="handleVerseClick(${index})" 
                         data-verse="${index}"
                         data-verse-number="${ayah.numberInSurah}"
                         role="button"
                         tabindex="0"
                         aria-label="Ø§Ù„Ø¢ÙŠØ© ${ayah.numberInSurah} - Ø§Ø¶ØºØ· Ù„Ù„ØªØ´ØºÙŠÙ„/Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù">
                        
                        <span class="verse-text">${ayah.text}</span>
                        
                        <span class="verse-number" aria-label="Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ©">${ayah.numberInSurah}</span>
                        
                        ${duration ? `<div class="verse-duration">${formatDuration(duration)}</div>` : ''}
                        
                        ${listenTimes > 0 ? `
                            <small class="listen-count" title="Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹">
                                (${listenTimes} Ù…Ø±Ø©)
                            </small>
                        ` : ''}
                    </div>
                `;
            });
            
            html += '</div>';
            contentDiv.innerHTML = html;
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø·
            applyFontSettings();
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ§Øª
            document.querySelectorAll('.verse').forEach(verse => {
                verse.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const verseIndex = parseInt(this.dataset.verse);
                        handleVerseClick(verseIndex);
                    }
                });
            });
            
            console.log(`ğŸ“– ØªÙ… Ø¹Ø±Ø¶ Ø³ÙˆØ±Ø© ${surah.name} (${surah.numberOfAyahs} Ø¢ÙŠØ©)`);
        }
        
        // ØªÙ†Ø³ÙŠÙ‚ Ù…Ø¯Ø© Ø§Ù„Ø¢ÙŠØ©
        function formatDuration(duration) {
            const minutes = Math.floor(duration / 60);
            const seconds = Math.floor(duration % 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ© - ØªØ­Ø³ÙŠÙ† Ø¬Ø¯ÙŠØ¯
        function handleVerseClick(verseIndex) {
            if (!currentSurah || verseIndex < 0 || verseIndex >= currentSurah.text.ayahs.length) {
                console.warn('âš ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
                return;
            }
            
            // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ù†ÙØ³ Ø§Ù„Ø³Ù„ÙˆÙƒ ÙƒØ§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
            if (memorizationMode) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¢ÙŠØ© Ù†ÙØ³Ù‡Ø§ Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹
                if (memorizationVerseIndex === verseIndex && isPlaying) {
                    pauseAudio(); // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
                    return;
                }
                
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¢ÙŠØ© Ù†ÙØ³Ù‡Ø§ ÙˆÙ„ÙƒÙ† Ù…ØªÙˆÙ‚ÙØ© Ø£Ùˆ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø±
                if (memorizationVerseIndex === verseIndex && (isPaused || isWaitingForRepeat)) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø±ØŒ Ù†ÙˆÙ‚Ù Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆÙ†Ø³ØªØ£Ù†Ù
                    if (isWaitingForRepeat) {
                        clearWaitingState();
                        // Ø§Ø³ØªØ¦Ù†Ø§Ù Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†Ù‚Ø·Ø© Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
                        resumeAudio();
                    } else {
                        resumeAudio(); // Ø§Ø³ØªØ¦Ù†Ø§Ù Ø¹Ø§Ø¯ÙŠ
                    }
                    return;
                }
                
                // ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                clearWaitingState();
                memorizationVerseIndex = verseIndex;
                currentRepetition = 0;
                playVerseInMemorizationMode(verseIndex);
                return;
            }
            
            // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¢ÙŠØ© Ù†ÙØ³Ù‡Ø§ Ø§Ù„ØªÙŠ ØªØ¹Ù…Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹
            if (currentVerseIndex === verseIndex && isPlaying) {
                pauseAudio(); // Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
                return;
            }
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¢ÙŠØ© Ù†ÙØ³Ù‡Ø§ ÙˆÙ„ÙƒÙ† Ù…ØªÙˆÙ‚ÙØ©
            if (currentVerseIndex === verseIndex && isPaused) {
                resumeAudio(); // Ø§Ø³ØªØ¦Ù†Ø§Ù
                return;
            }
            
            // ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
            playVerse(verseIndex);
        }
        
        // ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª
        async function playVerse(verseIndex) {
            if (!currentSurah || verseIndex < 0 || verseIndex >= currentSurah.text.ayahs.length) {
                console.warn('âš ï¸ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©');
                return;
            }
            
            try {
                currentVerseIndex = verseIndex;
                const audioUrl = currentSurah.audio.ayahs[verseIndex].audio;
                const verseText = currentSurah.text.ayahs[verseIndex].text;
                const verseElement = document.querySelector(`[data-verse="${verseIndex}"]`);
                
                // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØªØ´ØºÙŠÙ„ Ø­Ø§Ù„ÙŠ
                if (currentAudio) {
                    stopAudioCompletely();
                }
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¬Ø¯ÙŠØ¯
                const audioElement = document.getElementById('audioElement');
                audioElement.src = audioUrl;
                audioElement.playbackRate = playbackSpeed;
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´ØºÙ„
                document.getElementById('audioPlayer').style.display = 'block';
                document.getElementById('audioPlayerTop').classList.add('visible');
                document.getElementById('nowPlaying').textContent = 
                    `Ø§Ù„Ø¢ÙŠØ© ${verseIndex + 1} - Ø³ÙˆØ±Ø© ${currentSurah.text.name}`;
                document.getElementById('topNowPlaying').textContent = 
                    `Ø§Ù„Ø¢ÙŠØ© ${verseIndex + 1}`;
                
                // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¶ØºÙˆØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©
                if (window.innerWidth <= 768) {
                    showCompactPlayer();
                }
                
                // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                document.querySelectorAll('.verse').forEach(v => {
                    v.classList.remove('playing', 'paused');
                });
                verseElement.classList.add('playing');
                
                // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ©
                verseElement.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª
                setupWordHighlighting(verseElement, verseText);
                
                // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
                await audioElement.play();
                isPlaying = true;
                isPaused = false;
                updateNavigationButtons();
                updatePlayPauseButtons();
                
                console.log(`â–¶ï¸ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© ${verseIndex + 1}`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ©:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ„Ø§ÙˆØ©
        function setupWordHighlighting(verseElement, verseText) {
            const words = verseText.split(' ');
            const verseTextElement = verseElement.querySelector('.verse-text');
            
            if (!verseTextElement) return;
            
            // Ø¥Ù†Ø´Ø§Ø¡ HTML Ù„Ù„ÙƒÙ„Ù…Ø§Øª
            let html = '';
            words.forEach((word, index) => {
                html += `<span class="word" data-word-index="${index}">${word}</span> `;
            });
            
            verseTextElement.innerHTML = html;
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ…ÙŠÙŠØ² ØªØ¯Ø±ÙŠØ¬ÙŠ Ù„Ù„ÙƒÙ„Ù…Ø§Øª
            const wordElements = verseTextElement.querySelectorAll('.word');
            let currentWordIndex = 0;
            
            // ØªÙ‚Ø¯ÙŠØ± Ù…Ø¯Ø© ÙƒÙ„ ÙƒÙ„Ù…Ø© (ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ†Ù‡Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„ÙƒÙ„Ù…Ø©)
            const estimatedDuration = 3000; // 3 Ø«ÙˆØ§Ù†ÙŠ Ù„Ù„Ø¢ÙŠØ© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
            const wordDuration = estimatedDuration / words.length;
            
            const highlightInterval = setInterval(() => {
                if (currentWordIndex > 0 && wordElements[currentWordIndex - 1]) {
                    wordElements[currentWordIndex - 1].classList.remove('word-highlight');
                }
                
                if (currentWordIndex < wordElements.length && wordElements[currentWordIndex]) {
                    wordElements[currentWordIndex].classList.add('word-highlight');
                    currentWordIndex++;
                } else {
                    clearInterval(highlightInterval);
                }
            }, wordDuration);
            
            // Ø­ÙØ¸ Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ø¥ÙŠÙ‚Ø§ÙÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
            currentHighlightedWords.push(highlightInterval);
        }
        
        // Ù…Ø³Ø­ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        function clearWordHighlights() {
            document.querySelectorAll('.word-highlight').forEach(el => {
                el.classList.remove('word-highlight');
            });
            
            // Ø¥ÙŠÙ‚Ø§Ù Ø¬Ù…ÙŠØ¹ Ù…Ø¤Ù‚ØªØ§Øª Ø§Ù„ØªÙ…ÙŠÙŠØ²
            currentHighlightedWords.forEach(interval => clearInterval(interval));
            currentHighlightedWords = [];
        }
        
        // Ø¥ÙŠÙ‚Ø§Ù/Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø³Ù†
        function pauseAudio() {
            const audioElement = document.getElementById('audioElement');
            
            if (!audioElement.src) {
                showError('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØª Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„');
                return;
            }
            
            if (isPlaying) {
                audioElement.pause();
                isPlaying = false;
                isPaused = true;
                clearWordHighlights();
                
                // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ø¥ÙŠÙ‚Ø§Ù Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø£ÙŠØ¶Ø§Ù‹
                if (memorizationMode) {
                    clearWaitingState();
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¢ÙŠØ©
                    const verseElement = document.querySelector(`[data-verse="${memorizationVerseIndex}"]`);
                    if (verseElement) {
                        verseElement.classList.remove('playing', 'waiting-for-repeat');
                        verseElement.classList.add('paused');
                    }
                } else {
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¢ÙŠØ© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
                    const verseElement = document.querySelector(`[data-verse="${currentVerseIndex}"]`);
                    if (verseElement) {
                        verseElement.classList.remove('playing');
                        verseElement.classList.add('paused');
                    }
                }
                
                updatePlayPauseButtons();
                console.log('â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹');
            } else {
                resumeAudio();
            }
        }
        
        // Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„
        function resumeAudio() {
            const audioElement = document.getElementById('audioElement');
            
            if (!audioElement.src || !isPaused) return;
            
            audioElement.play().then(() => {
                isPlaying = true;
                isPaused = false;
                
                if (memorizationMode) {
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¢ÙŠØ© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                    const verseElement = document.querySelector(`[data-verse="${memorizationVerseIndex}"]`);
                    if (verseElement) {
                        verseElement.classList.remove('paused', 'waiting-for-repeat');
                        verseElement.classList.add('playing');
                        
                        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª
                        const verseText = currentSurah.text.ayahs[memorizationVerseIndex].text;
                        setupWordHighlighting(verseElement, verseText);
                    }
                } else {
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¢ÙŠØ© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
                    const verseElement = document.querySelector(`[data-verse="${currentVerseIndex}"]`);
                    if (verseElement) {
                        verseElement.classList.remove('paused');
                        verseElement.classList.add('playing');
                        
                        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ ØªÙ…ÙŠÙŠØ² Ø§Ù„ÙƒÙ„Ù…Ø§Øª
                        const verseText = currentSurah.text.ayahs[currentVerseIndex].text;
                        setupWordHighlighting(verseElement, verseText);
                    }
                }
                
                updatePlayPauseButtons();
                console.log('â–¶ï¸ ØªÙ… Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„');
            }).catch(error => {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„:', error);
                showError('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„');
            });
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„/Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ù„Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ø¹Ù„ÙˆÙŠ
        function togglePlayPause() {
            if (isPlaying) {
                pauseAudio();
            } else if (isPaused) {
                resumeAudio();
            }
        }
        
        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
        function stopAudio() {
            // Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
            if (memorizationMode) {
                stopMemorizationMode();
                return;
            }
            
            stopAudioCompletely();
            hideAudioPlayer();
            updatePlayPauseButtons();
            console.log('â¹ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹');
        }
        
        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª ØªÙ…Ø§Ù…Ø§Ù‹ - Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø©
        function stopAudioCompletely() {
            const audioElement = document.getElementById('audioElement');
            
            if (audioElement.src) {
                audioElement.pause();
                audioElement.currentTime = 0;
                // Ø¹Ø¯Ù… Ø­Ø°Ù Ø§Ù„Ù…ØµØ¯Ø± Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
            }
            
            isPlaying = false;
            isPaused = false;
            clearWordHighlights();
            clearWaitingState();
            
            // Ø¥Ø²Ø§Ù„Ø© ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¢ÙŠØ§Øª
            document.querySelectorAll('.verse').forEach(v => {
                v.classList.remove('playing', 'paused', 'waiting-for-repeat');
            });
            
            updateNavigationButtons();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ ÙˆØ§Ù„Ø¥ÙŠÙ‚Ø§Ù
        function updatePlayPauseButtons() {
            const pauseBtn = document.getElementById('pauseBtn');
            const topPlayPauseBtn = document.getElementById('topPlayPauseBtn');
            
            if (isPlaying) {
                pauseBtn.innerHTML = 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
                topPlayPauseBtn.textContent = 'â¸ï¸';
            } else if (isPaused) {
                pauseBtn.innerHTML = 'â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø©';
                topPlayPauseBtn.textContent = 'â–¶ï¸';
            } else {
                pauseBtn.innerHTML = 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
                topPlayPauseBtn.textContent = 'â¸ï¸';
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ©
        function handleAudioEnded() {
            // Ø¥Ø°Ø§ ÙƒÙ†Ø§ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
            if (memorizationMode) {
                handleMemorizationAudioEnded();
                return;
            }
            
            // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ
            clearWordHighlights();
            
            const verseKey = `${currentSurah.text.number}_${currentVerseIndex}`;
            const verseElement = document.querySelector(`[data-verse="${currentVerseIndex}"]`);
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© ÙƒÙ…ÙƒØªÙ…Ù„Ø©
            playedVerses.add(currentVerseIndex);
            completedVerses[verseKey] = true;
            listenCount[verseKey] = (listenCount[verseKey] || 0) + 1;
            
            // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
            localStorage.setItem('completedVerses', JSON.stringify(completedVerses));
            localStorage.setItem('listenCount', JSON.stringify(listenCount));
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            verseElement.classList.add('completed');
            verseElement.classList.remove('playing', 'paused');
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ
            verseElement.style.animation = 'pulse 0.6s ease-in-out';
            setTimeout(() => {
                verseElement.style.animation = '';
            }, 600);
            
            updateProgress();
            isPlaying = false;
            isPaused = false;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ§Ù„ÙŠ
            if (repeatVerse) {
                setTimeout(() => playVerse(currentVerseIndex), 1000);
            } else if (autoPlay && currentVerseIndex < currentSurah.text.ayahs.length - 1) {
                setTimeout(() => playVerse(currentVerseIndex + 1), 1500);
            } else if (currentVerseIndex === currentSurah.text.ayahs.length - 1 && repeatSurah) {
                setTimeout(() => playAll(), 2000);
            } else {
                // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªØ´ØºÙŠÙ„
                showSuccess('ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ©');
                updateNavigationButtons();
                updatePlayPauseButtons();
            }
            
            console.log(`âœ… Ø§Ù†ØªÙ‡Ù‰ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© ${currentVerseIndex + 1}`);
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©
        function playAll() {
            if (!currentSurah) {
                showError('ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            // Ù…Ù†Ø¹ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
            if (memorizationMode) {
                showError('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸');
                return;
            }
            
            playedVerses.clear();
            document.querySelectorAll('.verse').forEach(v => {
                v.classList.remove('playing', 'completed', 'paused');
            });
            
            playVerse(0);
            console.log('ğŸµ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©');
        }
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ù…Ø­Ø§ÙƒØ§Ø©)
        function playCurrentPage() {
            if (!currentSurah) {
                showError('ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }
            
            // Ù…Ù†Ø¹ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
            if (memorizationMode) {
                showError('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸');
                return;
            }
            
            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ´ØºÙŠÙ„ ØµÙØ­Ø© (Ø£ÙˆÙ„ 5 Ø¢ÙŠØ§Øª ÙƒÙ…Ø«Ø§Ù„)
            const endVerse = Math.min(4, currentSurah.text.ayahs.length - 1);
            
            let verseIndex = 0;
            function playNextPageVerse() {
                if (verseIndex <= endVerse) {
                    playVerse(verseIndex);
                    verseIndex++;
                }
            }
            
            playNextPageVerse();
            console.log(`ğŸ“„ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ø§Ù„Ø¢ÙŠØ§Øª 1-${endVerse + 1})`);
        }
        
        // ØªØºÙŠÙŠØ± Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
        function setPlaybackSpeed(speed) {
            playbackSpeed = speed;
            localStorage.setItem('playbackSpeed', playbackSpeed.toString());
            
            const audioElement = document.getElementById('audioElement');
            if (audioElement.src) {
                audioElement.playbackRate = speed;
            }
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('audioSpeedRange').value = speed;
            document.getElementById('speedValue').textContent = speed + 'Ã—';
            
            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø©
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.classList.remove('active');
                if (parseFloat(btn.textContent.replace('Ã—', '')) === speed) {
                    btn.classList.add('active');
                }
            });
            
            console.log(`ğŸšï¸ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø±Ø¹Ø© Ø¥Ù„Ù‰ ${speed}Ã—`);
        }
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ù† Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ±
        function changeAudioSpeed(speed) {
            setPlaybackSpeed(parseFloat(speed));
        }
        
        // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¢ÙŠØ§Øª
        function navigateVerse(direction) {
            if (!currentSurah) return;
            
            // Ù…Ù†Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
            if (memorizationMode) {
                showInfo('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø®Ø§ØµØ©');
                return;
            }
            
            const newIndex = currentVerseIndex + direction;
            if (newIndex >= 0 && newIndex < currentSurah.text.ayahs.length) {
                playVerse(newIndex);
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevVerseBtn');
            const nextBtn = document.getElementById('nextVerseBtn');
            
            if (!currentSurah || memorizationMode) {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                return;
            }
            
            prevBtn.disabled = currentVerseIndex <= 0;
            nextBtn.disabled = currentVerseIndex >= currentSurah.text.ayahs.length - 1;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ´ØºÙŠÙ„
        function updatePlaybackButtons(enabled) {
            if (memorizationMode) {
                // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
                const buttons = ['playAllBtn', 'playPageBtn', 'pauseBtn', 'stopBtn'];
                buttons.forEach(btnId => {
                    const btn = document.getElementById(btnId);
                    if (btn) {
                        btn.disabled = true;
                    }
                });
                return;
            }
            
            const buttons = ['playAllBtn', 'playPageBtn', 'pauseBtn', 'stopBtn'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.disabled = !enabled;
                }
            });
            
            updateNavigationButtons();
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ©
        function toggleRepeatVerse() {
            if (memorizationMode) {
                showInfo('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ ÙŠØªÙ… Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªÙƒØ±Ø§Ø± Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­ÙØ¸');
                return;
            }
            
            repeatVerse = !repeatVerse;
            const btn = document.getElementById('repeatVerseBtn');
            
            if (repeatVerse) {
                btn.classList.add('active');
                btn.textContent = 'ğŸ” Ø¥ÙŠÙ‚Ø§Ù ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ©';
                // Ø¥ÙŠÙ‚Ø§Ù ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
                if (repeatSurah) {
                    toggleRepeatSurah();
                }
            } else {
                btn.classList.remove('active');
                btn.textContent = 'ğŸ” ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ©';
            }
            
            console.log(`ğŸ” ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ©: ${repeatVerse ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø©
        function toggleRepeatSurah() {
            if (memorizationMode) {
                showInfo('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ ÙŠØªÙ… Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªÙƒØ±Ø§Ø± Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­ÙØ¸');
                return;
            }
            
            repeatSurah = !repeatSurah;
            const btn = document.getElementById('repeatSurahBtn');
            
            if (repeatSurah) {
                btn.classList.add('active');
                btn.textContent = 'ğŸ”„ Ø¥ÙŠÙ‚Ø§Ù ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø©';
                // Ø¥ÙŠÙ‚Ø§Ù ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
                if (repeatVerse) {
                    toggleRepeatVerse();
                }
            } else {
                btn.classList.remove('active');
                btn.textContent = 'ğŸ”„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø©';
            }
            
            console.log(`ğŸ”„ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø©: ${repeatSurah ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function toggleAutoPlay() {
            if (memorizationMode) {
                showInfo('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ø§Ù„ØªÙ‚Ø¯Ù… ÙŠØªÙ… ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø£Ùˆ Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙƒØ±Ø§Ø±');
                return;
            }
            
            autoPlay = !autoPlay;
            const btn = document.getElementById('autoPlayBtn');
            
            if (autoPlay) {
                btn.classList.add('active');
                btn.textContent = 'â­ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ';
            } else {
                btn.classList.remove('active');
                btn.textContent = 'â­ï¸ ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ';
            }
            
            console.log(`â­ï¸ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: ${autoPlay ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress() {
            if (!currentSurah) return;
            
            const totalVerses = currentSurah.text.ayahs.length;
            const completedCount = playedVerses.size;
            const progress = (completedCount / totalVerses) * 100;
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = 
                `ØªÙ… Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù€ ${completedCount} Ù…Ù† ${totalVerses} Ø¢ÙŠØ© (${Math.round(progress)}%)`;
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ´ØºÙŠÙ„
        function resetPlayback() {
            currentVerseIndex = 0;
            playedVerses.clear();
            isPlaying = false;
            isPaused = false;
            
            // Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„
            if (memorizationMode) {
                stopMemorizationMode();
            }
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('progressText').textContent = 'Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø¹Ø¯';
            
            document.querySelectorAll('.verse').forEach(v => {
                v.classList.remove('playing', 'paused', 'waiting-for-repeat');
            });
            
            clearWordHighlights();
            clearWaitingState();
            
            console.log('ğŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØ´ØºÙŠÙ„');
        }
        
        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }
        
        function toggleDarkMode() {
            darkMode = !darkMode;
            document.body.classList.toggle('dark-mode', darkMode);
            localStorage.setItem('darkMode', darkMode.toString());
            console.log(`ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ: ${darkMode ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }
        
        function changeFontSize() {
            fontSize = document.getElementById('fontSize').value;
            localStorage.setItem('fontSize', fontSize);
            applyFontSettings();
            console.log(`ğŸ”¤ ØªÙ… ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ø¥Ù„Ù‰: ${fontSize}`);
        }
        
        function changeFontType() {
            fontType = document.getElementById('fontType').value;
            localStorage.setItem('fontType', fontType);
            applyFontSettings();
            console.log(`âœ’ï¸ ØªÙ… ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø· Ø¥Ù„Ù‰: ${fontType}`);
        }
        
        function toggleReadingMode() {
            readingMode = document.getElementById('readingMode').checked;
            document.body.classList.toggle('reading-mode', readingMode);
            localStorage.setItem('readingMode', readingMode.toString());
            console.log(`ğŸ“– ÙˆØ¶Ø¹ Ø§Ù„Ù…ØµØ­Ù: ${readingMode ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }
        
        function applyFontSettings() {
            document.querySelectorAll('.verse').forEach(verse => {
                verse.style.fontSize = fontSize;
                
                if (fontType === 'uthmani') {
                    verse.classList.add('uthmani-font');
                } else {
                    verse.classList.remove('uthmani-font');
                }
            });
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø³Ù…Ù„Ø© Ø£ÙŠØ¶Ø§Ù‹
            const basmala = document.querySelector('.basmala');
            if (basmala) {
                basmala.style.fontSize = `calc(${fontSize} + 0.2rem)`;
            }
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        function setupKeyboardControls() {
            document.addEventListener('keydown', function(e) {
                // ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ù…Ø¹ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') {
                    return;
                }
                
                // ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ¹Ø·ÙŠÙ„ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª
                if (memorizationMode && !['Escape'].includes(e.code)) {
                    if (e.code === 'ArrowRight' || e.code === 'ArrowLeft') {
                        e.preventDefault();
                        showInfo('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©"');
                        return;
                    }
                }
                
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        if (!memorizationMode) {
                            pauseAudio();
                        }
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        navigateVerse(-1); // ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙŠÙ…Ù† Ù„Ù„Ø³Ø§Ø¨Ù‚
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        navigateVerse(1); // ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙŠØ³Ø± Ù„Ù„ØªØ§Ù„ÙŠ
                        break;
                    case 'Escape':
                        e.preventDefault();
                        stopAudio();
                        break;
                    case 'KeyR':
                        e.preventDefault();
                        toggleRepeatVerse();
                        break;
                    case 'KeyS':
                        e.preventDefault();
                        toggleRepeatSurah();
                        break;
                    case 'KeyA':
                        e.preventDefault();
                        toggleAutoPlay();
                        break;
                    case 'BracketRight': // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø©
                        e.preventDefault();
                        setPlaybackSpeed(Math.min(2, playbackSpeed + 0.1));
                        break;
                    case 'BracketLeft': // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø³Ø±Ø¹Ø©
                        e.preventDefault();
                        setPlaybackSpeed(Math.max(0.5, playbackSpeed - 0.1));
                        break;
                    case 'KeyM': // ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
                        e.preventDefault();
                        switchTab(currentTab === 'memorization' ? 'learning' : 'memorization');
                        break;
                }
            });
            
            console.log('âŒ¨ï¸ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­');
        }
        
        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„ØµÙˆØªÙŠ
        function hideAudioPlayer() {
            document.getElementById('audioPlayer').style.display = 'none';
            document.getElementById('audioPlayerTop').classList.remove('visible');
        }
        
        function showCompactPlayer() {
            document.getElementById('audioPlayer').style.display = 'none';
            document.getElementById('audioPlayerTop').classList.add('visible');
        }
        
        function minimizePlayer() {
            const player = document.getElementById('audioPlayer');
            if (player.classList.contains('minimized')) {
                player.classList.remove('minimized');
            } else {
                player.classList.add('minimized');
            }
        }
        
        function updateAudioProgress() {
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… Ù„Ù„ØµÙˆØª Ù‡Ù†Ø§
            const audioElement = document.getElementById('audioElement');
            if (audioElement.duration) {
                const progress = (audioElement.currentTime / audioElement.duration) * 100;
                // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø¥Ø°Ø§ Ø£Ø±Ø¯Ù†Ø§ Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØµÙˆØª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø­Ø³Ù†Ø©
        function handleAudioError(event) {
            // ØªØ¬Ù†Ø¨ Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
            const audioElement = document.getElementById('audioElement');
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØµØ¯Ø± ÙØ§Ø±ØºØ§Ù‹ Ø£Ùˆ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª Ø¹Ù…Ø¯Ø§Ù‹ØŒ Ù„Ø§ Ù†Ø¸Ù‡Ø± Ø®Ø·Ø£
            if (!audioElement.src || audioElement.src === window.location.href) {
                return;
            }
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ Ø¨Ø³Ø¨Ø¨ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ØŒ Ù„Ø§ Ù†Ø¸Ù‡Ø± Ø®Ø·Ø£
            if (event.target.error && event.target.error.code === 4) { // MEDIA_ELEMENT_ERROR
                return;
            }
            
            console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', event.target.error);
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø·Ø£ ÙÙ‚Ø· Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
            if (isPlaying || isPaused) {
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø§Ø±Ø¦ Ø¢Ø®Ø±.');
                stopAudioCompletely();
                updatePlayPauseButtons();
            }
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
        function showLoading(message = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...') {
            const contentDiv = document.getElementById('surahContent');
            contentDiv.innerHTML = `<div class="loading">${message}</div>`;
        }
        
        function hideLoading() {
            // Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙˆØ±Ø©
        }
        
        function showError(message) {
            const contentDiv = document.getElementById('surahContent');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.innerHTML = `
                <strong>Ø®Ø·Ø£:</strong> ${message}
                <br><small>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</small>
            `;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø·Ø£ Ø¯ÙˆÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯
            if (contentDiv.querySelector('.loading')) {
                contentDiv.innerHTML = '';
            }
            contentDiv.insertBefore(errorDiv, contentDiv.firstChild);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.remove();
                }
            }, 5000);
        }
        
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            successDiv.style.position = 'fixed';
            successDiv.style.top = '20px';
            successDiv.style.right = '20px';
            successDiv.style.zIndex = '10000';
            successDiv.style.minWidth = '300px';
            
            document.body.appendChild(successDiv);
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†Ù
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }
        
        function showInfo(message) {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'info-message';
            infoDiv.textContent = message;
            infoDiv.style.position = 'fixed';
            infoDiv.style.top = '20px';
            infoDiv.style.right = '20px';
            infoDiv.style.zIndex = '10000';
            infoDiv.style.minWidth = '300px';
            
            document.body.appendChild(infoDiv);
            
            setTimeout(() => {
                infoDiv.remove();
            }, 4000);
        }
        
        // ÙˆØ¸ÙŠÙØ© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø¢Ù„ÙŠØ© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        async function fetchWithFallback(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response;
            } catch (error) {
                console.warn(`âš ï¸ ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†: ${url}`);
                throw error;
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…Ø©
        function handleGlobalError(event) {
            console.error('âŒ Ø®Ø·Ø£ Ø¹Ø§Ù… ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:', event.error);
            
            // Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if (event.error && event.error.name !== 'NetworkError') {
                showError('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©.');
            }
        }
        
        // ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        console.log(`
ğŸ•Œ Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø§Ù„Ù…Ø·ÙˆØ± Ù…Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ
ğŸ“± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:
âœ… ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ - Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙŠÙ‚Ø±Ø£ Ø«Ù… ÙŠÙ†ØªØ¸Ø± ØªØ±Ø¯ÙŠØ¯ Ø§Ù„Ø·ÙÙ„
âœ… ÙØªØ±Ø© Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ (3-15 Ø«Ø§Ù†ÙŠØ© Ø£Ùˆ ØªÙ„Ù‚Ø§Ø¦ÙŠ)
âœ… ØªÙƒØ±Ø§Ø± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­ÙƒÙ… (1-5 Ù…Ø±Ø§Øª Ø£Ùˆ Ø¨Ø¯ÙˆÙ† Ø­Ø¯)
âœ… Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ø¨ØµØ±ÙŠ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±
âœ… ØªÙ…ÙŠÙŠØ² Ø¨ØµØ±ÙŠ Ù„Ù„Ø¢ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
âœ… Ø£Ø²Ø±Ø§Ø± ØªØ­ÙƒÙ… Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ ÙˆØ¶Ø¹
âœ… Ù…Ù†Ø¹ Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©

ğŸ§  ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ:
1. Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© ÙˆØ§Ù„Ù‚Ø§Ø±Ø¦
2. Ø§Ù†ØªÙ‚Ù„ Ù„ØªØ¨ÙˆÙŠØ¨ "Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ"
3. Ø§Ø¶Ø¨Ø· ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
4. Ø§Ø¶ØºØ· "Ø¨Ø¯Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸"
5. Ø§Ø³ØªÙ…Ø¹ Ù„Ù„Ø¢ÙŠØ© Ø«Ù… Ø±Ø¯Ø¯ Ø®Ù„Ø§Ù„ ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
6. Ø§Ø³ØªØ®Ø¯Ù… "Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©" Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹

âŒ¨ï¸ Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­:
- Ù…Ø³Ø·Ø±Ø© Ø§Ù„Ù…Ø³Ø§ÙØ©: Ø¥ÙŠÙ‚Ø§Ù/ØªØ´ØºÙŠÙ„ (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ)
- Ø§Ù„Ø£Ø³Ù‡Ù…: Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¢ÙŠØ§Øª (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ)
- Escape: Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„/Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
- M: ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ù„Ù… ÙˆÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸
- R: ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ© (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ)
- S: ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³ÙˆØ±Ø© (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ)
- A: Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ)

ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
- ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø­ÙØ¸ØŒ Ù„Ø§ ØªØ¹Ù…Ù„ Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ§Øª
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø²Ù…Ù† Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙˆÙ‚Øª Ù…Ù†Ø§Ø³Ø¨ Ù„Ø·ÙˆÙ„ Ø§Ù„Ø¢ÙŠØ©
- ÙŠÙ…ÙƒÙ† ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¢ÙŠØ© Ø¹Ø¯Ø© Ù…Ø±Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØ§Ù„ÙŠØ©
- Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ (Ø¨Ø¯ÙˆÙ† Ø­Ø¯) ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ©"
        `);
    </script>
</body>
</html>
